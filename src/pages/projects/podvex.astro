---
import "@/styles/globals.css";
import Layout from "@/layouts/Layout.astro";
import { PROJECTS } from "@/data/projects";
import { Image } from "astro:assets";
import { ImageTabs } from "@/components/project-details/image-tabs";
import Button from "@/components/ui/button.astro";
import Source from "@/components/icons/source.astro";
import Github from "@/components/icons/github.astro";
import Live from "@/components/icons/live.astro";
// import {
//   Accordion,
//   AccordionContent,
//   AccordionItem,
//   AccordionTrigger,
// } from "@/components/client/ui/accordion";
import { ProjectAccordion } from "@/components/project-details/project-accordion";
import Skill from "@/components/skill.astro";
import TechStack from "@/components/project-details/tech-stack.astro";
import AccordionItem from "@/components/project-details/accordion-item.astro";
import PageTitle from "@/components/page-title.astro";
import ArrowL from "@/components/icons/arrow-l.astro";
import Breadcrumbs from "@/components/ui/breadcrumbs.astro";

const {
  title,
  subtitle,
  description,
  thumbnail,
  images,
  skills,
  features,
  actions,
} = PROJECTS[0];
---

<Layout title={`${title} | Tim Machnacki`}>
  <div class="absolute left-0 top-6 lg:top-12 w-full lg:fixed z-20">
    <Breadcrumbs
      links={[
        { title: "Tim Machnacki", href: "/", current: false },
        { title: "Projects", href: "/projects", current: false },
        { title: "Podvex", href: "/projects/podvex", current: true },
      ]}
      class={"relative w-full max-w-screen-xl mx-auto px-6 md:px-12 xl:px-20"}
    />
  </div>

  <main
    class="page-container relative w-full lg:grid lg:grid-cols-10 lg:gap-12"
  >
    <!-- left column -->
    <div
      class="relative w-full lg:sticky lg:top-0 lg:col-span-7 lg:max-h-svh lg:py-24"
    >
      <div class="block lg:hidden mb-6">
        <PageTitle class="mb-2 leading-none">{title}</PageTitle>
        <h2 class="text-base text-muted-foreground">
          {subtitle}
        </h2>
      </div>
      <!-- tabs -->
      <ImageTabs
        projectTitle={title}
        projectUrl={actions?.demo}
        images={images!}
        className={"relative"}
        client:load
      />
    </div>

    <!-- right column -->

    <div class="relative w-full lg:col-span-3 lg:py-24">
      <div class="scroll-mt-16 lg:scroll-mt-24">
        <div class="hidden lg:block">
          <PageTitle class="mb-2 leading-none">{title}</PageTitle>
          <h2 class="text-base text-muted-foreground">
            {subtitle}
          </h2>
        </div>

        {
          actions && (
            <ul class="mt-6 flex items-center gap-2">
              {actions?.source && (
                <li>
                  <Button
                    as={"a"}
                    variant={"outline"}
                    gradient={"zinc"}
                    class={
                      "group/action relative w-full rounded-full transition"
                    }
                    href={actions?.source}
                    target={"_blank"}
                  >
                    <Github class={"mr-2 size-4"} />
                    Source
                  </Button>
                </li>
              )}
              {actions?.demo && (
                <li>
                  <Button
                    as={"a"}
                    variant={"outline"}
                    gradient={"zinc"}
                    class={
                      "group/action relative w-full rounded-full transition"
                    }
                    href={actions?.demo}
                    target={"_blank"}
                  >
                    <Live class={"mr-2 size-4"} />
                    Demo
                  </Button>
                </li>
              )}
            </ul>
          )
        }

        <ProjectAccordion
          accordionClassName="mt-6"
          features={features}
          client:load
        >
          <TechStack skills={skills} slot={"tech"} />
        </ProjectAccordion>
      </div>
    </div>
  </main>
</Layout>
